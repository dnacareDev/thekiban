<!doctype html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- 공통 헤더 -->
    <th:block th:include="/../fragments/header.html"></th:block>
    <!-- js -->
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<style>
* {
	box-sizing: border-box;
}
body, h1, h2, h3, h4, h5, h6, p, ul, ol {
	margin: 0;
	padding: 0;
}
ul, ol {
	list-style: none;
}
a {
	text-decoration: none;
	color: #000;
}
img {
	vertical-align: top;
	border: 0;
}
/*
body {
	overflow-y: hidden;
}*/
.clearfix::before{
	content: "";
	display: block;
}
.clearfix::after{
	content: "";
	display: block;
	clear: both;
}
.contents{
    margin:0 auto;
    width:100%;
}
.box{
    width: 40%;
    float: left;
}
h6.title{
	display:block;
	font-size: 20px;
	padding: 20px 0;
}
input[type="text"] {
    width: 100%;
    height: 50px;
    font-size: 11px;
    border:1px solid #ddd;
    border-radius: 10px;
    padding: 0 10px;
    color:#B2B2B2;
}
.text_box{
	width: 100%;
	border:1px solid #ddd;
    border-radius: 10px;
	overflow:auto;
	background-color: #fff;
	min-height: 300px;
	max-height: 300px;
}
.text_box.text_box3{
	height: auto;
}
.text_box li{
	display: block;
	width:100%;
	cursor: pointer;
	line-height: 2;
	border-bottom: 1px solid #E2E3E5;
	color:#666666;
}
.text_box li:hover{
	background-color: #EDF6F1;
}
.text_box li.clicked{
	background-color: #217566;
	color: #fff;
}
.text_box li span{
	width:100%;
	text-align:left;
	padding: 0 10px;
}
/*
li span.bg{
	background-color:
}
*/
.button {
	width:20%;
	float:left;
	padding-top:50px;
	display:table;
}
.button ul{
	display:table-cell;
	vertical-align: middle;
}
.button li{
	width:100%;
	text-align:center;
	padding-top:20px;
}
.button li button{
	width:32px;
	height:32px;
	border: 2px solid #217566;
	background-color: transparent;
	border-radius: 50%;
}
.button li button span{
	position:relative;
}
.button li button span::after{
	content:"";
	display:block;
	position:absolute;
	top:-7px;
	left:0;
	width:2px;
	height: 10px;
	background-color: #217566;
	transform: rotate(-45deg);
}
.button li button span::before{
	content:"";
	display:block;
	position:absolute;
	top:-1px;
	left:0;
	width:2px;
	height: 10px;
	background-color: #217566;
	transform: rotate(45deg);
}
.button li button span.left_btn::after{
	left:-2px;
	transform: rotate(45deg);
}
.button li button span.left_btn::before{
	left:-2px;
	transform: rotate(-45deg);
}
input[type="checkbox"]{
	display:none;
}
/*button{
    width:100px;
    height: 20px;
    text-align: center;
    border-radius: 5px;
    float:right;
    margin-top:5px;
}*/
.top-menu .main-content .contents{
	padding-top: 30px;
	padding-left:0;
	background-color: #fff;
}
.submit_btn {
	padding: 20px 0;
	float: right;
}
.main-content{
	/*padding: 10px 0 0 0;*/
}

/* alert 팝업 */
.dim{
	position:fixed;
	left:0;
	top:0;
	width:100%;
	height:100vh;
	background-color:rgba(0,0,0,0.3);
	z-index: 9;
}
#alert{
	width:100%;
	position:fixed;
	left:0;
	top:0;
	width:100%;
	height:100vh;
	z-index: 9999999999999999999999999;
}
#alert .alert_table{
	display: table;
	width:100%;
	height: 100%;
	
}
#alert .alert_table .alert_inner{
	display:table-cell;
	vertical-align:middle;
}
#alert .alert_table .alert_inner .alert_cover{
	max-width:550px;
	margin:0 auto;
	padding: 50px;
	text-align:center;
	background-color: #fff;
	border-radius: 10px;
}
#alert .alert_table .alert_inner .alert_cover .title_text{
	color: #222222;
	font-size: 20px;
	font-weight: 500;
}
#alert .alert_table .alert_inner .alert_cover button[type="button"]{
	padding: 10px 30px;
	color: #fff;
	background-color:#217566;
	border-radius: 5px;
	margin-top:30px;
	border: none;
}

.select {
	margin-top: 40px;
}
.select dl {
	display: inline-block;
	position: relative;
	line-height: 27px;
	vertical-align: middle;
	width:100%;
}
.select dl dt a {
	display: block;
	position: relative;
	padding-left: 20px;
	width: 100%;
	padding: 10px 0;
	font-size: 0.75em;
	color: #000;
	border: 1px solid #dedede;
	border-radius: 40px;
	text-align:center;
}
.select dl dt a.open{
	padding-bottom: 50px;
}
.select dl dt a span {
	display: inline-block;
	position: absolute;
	right: 10px;
	top: 50%;
	margin-top: -3px;
	width: 10px;
	height: 6px;
}
.select dl dd {
	display: none;
	position: absolute;
	left: 0;
	top: 40px;
	z-index: 10;
	margin: 0;
	padding: 0;
	width: 100%;
	background: #fff;
	border: 1px solid #dedede;
	border-top: none;
	padding-top: 30px;
	max-height: 300px;
	overflow: auto;
}
.select dl dd li {
	border-top: 1px solid #eaefe3;
}
.select dl dd li:first-child {
	border-top: none;
}
.select dl dd li a {
	display: block;
	position: relative;
	padding-left: 31px;
	line-height: 32px;
	text-decoration: none;
	font-size: 0.75em;
	background-color: #fff;
	color: #888;
	transition: background-color 0.3s;
}
.select dl dd li a.active {
	background-color: #f1f1f1;
}
.select dl dd li:hover a{
	background-color: #EDF6F1;
}
.select dl dd li a::after {
	content: "";
	display: block;
	position: absolute;
	left: 5px;
	top: 6px;
	width: 21px;
	height: 21px;
	background: url(images/spr_btns.png) no-repeat 0 0;
}
.select dl dd li .kr::after {
	background-position: -392px -326px;
}
.select dl dd li .eng::after {
	background-position: -392px -360px;
}
.select dl dd li .cn::after,
.select dl dd ul li .glo:after {
	background-position: -392px -395px;
}
.select select {
	width:100%;
	height: 42px;
	border: 1px solid #dedede;
	border-radius: 40px;
	padding: 0 20px;
	margin: 0;
}
</style>
</head>

<body class="layout-light top-menu overlayScroll">
<div class="mobile-search"></div>
<div class="mobile-author-actions"></div>
<!-- 공통 topbar -->
<th:block th:include="/../fragments/topbar.html"></th:block>
<main class="main-content">
<div class="contents" style="background-color: #FFFFFF;">
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12 mb-30">
				<div class="card">
					<div class="container clearfix">
						<form action="" method="post">
							<div class="contents clearfix">
								<h6 class="title">분석대상선택</h6>
								<div class="box box1">
									<input type="text" placeholder="품종-시교명ID, 원종-계통명ID 검색">
									<div class="text_box text_box1">
										<ul>
											<th:block th:each="breed : ${breed}">
												<li><input type="checkbox" class="plus_target" th:value="${breed.breed_id}"><span th:text="${breed.standard}"></span></li>
											</th:block>
											<th:block th:each="basic : ${basic}">
												<li><input type="checkbox" class="plus_target"><span th:text="${basic.standard}"></span></li>
											</th:block>
										</ul>
									</div>
								</div>
								<div class="button clearfix">
									<ul>
										<!-- <li><button type="button" class="right_plus" onclick="plusFunction(this, array1)"><span class="right_btn"></span></button></li> -->
										<!-- <li><button type="button" onclick="plusFunction(this, array2)"><span class="left_btn"></span></button></li> -->
										<li><button type="button" class="right_plus" onclick="PlusBtn(0)"><span class="right_btn"></span></button></li>
										<li><button type="button" onclick="MinusBtn(0)"><span class="left_btn"></span></button></li>
									</ul>
								</div>
								<div class="box box2">
									<input type="text" value="품종-시교명ID, 원종-계통명ID 검색">
									<div class="text_box text_box2">
										<ul>
										</ul>
									</div>
								</div>   
							</div>
							<div class="contents clearfix">
								<h6 class="title">분석방법</h6>
								<div class="box box3">
									<input type="hidden">
									<div class="text_box text_box3">
										<ul>
											<li><input type="checkbox" class="plus_method" value="Correlation"><span>Correlation</span></li>
											<li><input type="checkbox" class="plus_method" value="Trait View"><span>Trait View</span></li>
										</ul>
									</div>
								</div>
								<div class="button clearfix">
									<ul>
										<!-- <li><button type="button" class="right_plus" onclick="plusFunction(this, array1)"><span class="right_btn"></span></button></li> -->
										<!-- <li><button type="button" onclick="plusFunction(this, array2)"><span class="left_btn"></span></button></li> -->
										<li><button type="button" class="right_plus" onclick="PlusBtn(1)"><span class="right_btn"></span></button></li>
										<li><button type="button" onclick="MinusBtn(1)"><span class="left_btn"></span></button></li>
									</ul>
								</div>
								<div class="box box4">
									<input type="hidden">
									<div class="text_box text_box4">
										<ul id="method_ul">
										</ul>
									</div>
								</div>
							</div>
							<div class="contents clearfix">
								<h6 class="title">분석형질</h6>
								<div class="box box1">
									<input type="text" value="품종-시교명ID, 원종-계통명ID 검색">
									<div class="text_box text_box5">
										<ul>
											<li><input type="checkbox"><span>19PC0233</span></li> 
											<li><input type="checkbox"><span>29PC0233</span></li>
											<li><input type="checkbox"><span>39PC0233</span></li>
											<li><input type="checkbox"><span>49PC0233</span></li>
											<li><input type="checkbox"><span>59PC0233</span></li>
											<li><input type="checkbox"><span>69PC0233</span></li>
											<li><input type="checkbox"><span>79PC0233</span></li>
											<li><input type="checkbox"><span>89PC0233</span></li>
											<li><input type="checkbox"><span>99PC0233</span></li>
											<li><input type="checkbox"><span>19PC0233</span></li>
										</ul>
									</div>
								</div>
								<div class="button clearfix">
									<ul>
										<li><button type="button" class="right_plus" onclick="plusFunction(this, array1)"><span class="right_btn"></span></button></li>
										<li><button type="button" onclick="plusFunction(this, array2)"><span class="left_btn"></span></button></li>
									</ul>
								</div>
								<div class="box box2">
									<input type="text" value="품종-시교명ID, 원종-계통명ID 검색">
									<div class="text_box text_box6">
										<ul>
										</ul>
									</div>
								</div>
							</div>
							<div class="submit_btn">
								<input type="submit" class="btn btn-primary btn-sm" value="분석실행">
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</main>
<!-- 공통 하단 -->
<th:block th:include="/../fragments/footer.html"></th:block>
<!-- 공통 js -->
 <th:block th:include="/../fragments/commonjs.html"></th:block>
<script>
	$(document).ready(function()
	{
		CheckFunction();
		autoHeight();
	});

	let inner_html= "";
	let text_box;
	let array1 = [];
	let array2 = [];
	let textLi;
	
	function plusFunction(e, Arrays)
	{
		Arrays = [];
		
		if($(e).hasClass("right_plus") == true)
		{
			textLi = $(e).parent().parent().parent().prev().children().eq(1).children().children();
			text_box = $(e).parent().parent().parent().next().children().eq(1).children();
		}
		else
		{
			textLi = $(e).parent().parent().parent().next().children().eq(1).children().children();
			text_box = $(e).parent().parent().parent().prev().children().eq(1).children();
		}
		
		textLi.each(function(idx, elem)
		{
			if($(elem).children().eq(0).is(":checked") == true)
			{
				Arrays.push($(elem).children().eq(1).text());
				$(elem).remove();
			}
		});
		
		for(let i=0; i< Arrays.length; i++)
		{
			inner_html += "<li><input type='checkbox'><span>"+ Arrays[i]+"</span></li>";
		}
		
		text_box.append(inner_html);
		inner_html = "";
		
		CheckFunction();
	}

	

	function CheckFunction()
	{
		$('.text_box li').off('click').on('click', function(e)
		{
			e.preventDefault();
			
			$(this).toggleClass("clicked");
			
			if($(this).hasClass("clicked") == true)
			{
				$(this).children().eq(0).prop("checked", true);
			}
			else
			{
				$(this).children().eq(0).prop("checked", false);
			}
		});
	}

	function autoHeight()
	{
		/* 높이 조절 */
		$(".box1 .text_box").each(function(idx, elem)
		{
			let box_height = $(elem).height();
			$(elem).parent().next().css({"height" : $(elem).parent().height(), "padding-top": 0});
		});
	}
	
	function PlusBtn(e)
	{
		if(e == 0)
		{
			$(document).find("input:checkbox[class=plus_target]:checked").each(function()
			{
				var target_add = "";
				
				target_add += '<li><input type="checkbox" class="minus_target" value="' + $(this).val() + '"><span>' + $(this).next().text() + '</span></li>';
				
				$(this).parent().remove();
				$(".text_box2").append(target_add);
			})
		}
		else if(e == 1)
		{
			if($(".minus_method").length == 0)
			{
				$(document).find("input:checkbox[class=plus_method]:checked").each(function()
				{
					var target_add = "";
					
					target_add += '<li><input type="checkbox" class="minus_method" value="' + $(this).val() + '"><span>' + $(this).next().text() + '</span></li>';
					
					$(this).parent().remove();
					$(".text_box4").append(target_add);
				})
			}
			else
			{
				return Alert("분석방법은 단일 선택만 가능합니다.");
			}
		}
		
		CheckFunction();
	}
	
	function MinusBtn(e)
	{
		if(e == 0)
		{
			$(document).find("input:checkbox[class=minus_target]:checked").each(function()
			{
				var add_list = "";
				
				add_list += '<li><input type="checkbox" class="plus_target"><span>' + $(this).next().text() + '</span></li>';
				
				$(this).parent().remove();
				$(".text_box1").append(add_list);
			})
		}
		else if(e == 1)
		{
			$(document).find("input:checkbox[class=minus_method]:checked").each(function()
			{
				var add_list = "";
				
				add_list += '<li><input type="checkbox" class="plus_target"><span>' + $(this).next().text() + '</span></li>';
				
				$(this).parent().remove();
				$(".text_box3").append(add_list);
			})
		}
		
		CheckFunction();
	}
</script>
</body>
</html>