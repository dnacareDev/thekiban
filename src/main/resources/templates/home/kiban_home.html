<!doctype html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- 공통 헤더 -->
    <th:block th:include="/../fragments/header.html"></th:block>

    <style>

        #doughnut .slick-slider__single {
            background: #FFFFFF;
            height: 270px;
            justify-content: space-between;
        }

        .main-content .contents .row .card { /* 2021-10-19 AlpaDesign 추가 */
            border-radius: 10px;
            box-shadow: 0 3px 15px 3px rgb(0 0 0 / 7%); /* 2021-11-02 수정 */
            /* box-shadow: 0 0 3px 3px rgb(0 0 0/ 3%); */
        }

        .main-content .contents .row .card .slick-slider__single { /* 2021-10-19 AlpaDesign 추가 */
            align-items: start;
        }

        .main-content .contents .row .card .slick-slider__single > div {
            display: table;
            height: 100%;
        }

        .main-content .contents .row .card .doughnut_cover {
            display: table-cell;
            vertical-align: middle;
        }

        .main-content .contents .row .card .data_percent {
            font-size: 11px;
            display: table;
            height: 100%;
            text-align: right;
        }

        .main-content .contents .row .card .data_percent ul {
            display: table-cell;
            vertical-align: middle;
            line-height: 1.89;
        }

        .slick-slider.slick-dots-bottom .slick-dots {
            margin: 0 0 5px;
        }

        .main-content .contents .slick-slider .slick-dots li.slick-active button {
            background-color: #3B7366;
        }

        .main-content .contents .slick-slider .slick-dots li {
            width: 30px;
            padding: 0;
            margin-left: 10px;
        }

        .main-content .contents .slick-slider .slick-dots li:first-child {
            margin-left: 0;
        }

        .main-content .contents .slick-slider .slick-dots li button {
            width: 100%;
        }

        .main-content .contents .color-primary {
            color: #222222;
        }

        .main-content .col-lg-12 .card .card-body ul.map li {
            float: left;
            width: calc((100% - 50px) / 2);  
            margin-left: 50px;
            overflow: hidden;
        }

        .main-content .col-lg-12 .card .card-body ul.map li:first-child {
            margin-left: 0;
        }

        .main-content .card-body ul.map li img {
            width: 100%;
        }

        .data_relative {
            position: relative;
        }

        .data_number {
            position: absolute;
            left: 25%;
            top: 46%;
        }

        #google_container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            height: 200px;
        }

        #google_container li {
            flex: 1;
            height: 100%;
        }

        .main-content .contents .container-fluid {
            max-width: 100%;
            padding-top: 30px !important;
            padding-bottom: 0 !important;
        }

        .main-content .contents .container-fluid:last-child {
            padding-bottom: 30px !important;
        }


        /* 2021 - 11 - 01 수정 */
        .main-content .contents .row .card .card-body #doughnut.slick-slider {
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .container-fluid .col-lg-12 .card .card-body {
            padding: 10px 1.56rem 10px;
        }

        .main-content .contents .container-fluid {
            padding-top: 15px
        }

        .col-lg-12 .card .card-body .slick-slider__single {
            width: 50%
        }

        .col-lg-12 .card .card-body .slick-slider__single .color-primary {
            margin: 10px -70px 0 0 !important;
            white-space: nowrap;
        }

        .col-lg-12 .card .card-body .slick-slider__single .data_percent {
            margin-right: 58px;
        }

        .col-lg-12 .card .card-body .slick-slider__single:last-child .data_percent:last-child {
            margin-right: 0px;
        }

        .container-fluid:last-child .col-lg-12 .card .card-body {
            padding-bottom: 40px
        }

        /* 두변쨰 카드 */
        .container-fluid .col-lg-12 .card .color-primary {
            margin-top: 2rem !important;
            margin-bottom: 0 !important;
            margin-left: 2rem !important;
            font-size: 16px;
        }

        .col-lg-12 .card .card-body #google_container {
            height: 400px
        }

        /* 2021 - 11 - 02 수정 */


        @media only screen and (min-width: 992px) {
            /* 2021-10-19 AlpaDesign 추가 */
            .main-content .contents .row .col-lg-12 {
                padding: 0 50px 0 50px;
            }
        }
        
        /* 2022-04-27 DNACARE | google지도 마커의 상세정보를 띄울 시 생성되는 modal(title : 시교자원관리)의 table을 중앙정렬   */
        /* ※sample.html에도 똑같이 추가 */
		table.modal-outcome {
			width: 100%;
			height: 100px;
			margin: auto;
			text-align: left;
		}
		
		/* 2022-04-27 DNACARE | 구글맵 상세정보에 해당하는 버튼에도 같은 css를 적용하기 위해 #google_map-detail 추가 */
		/* sample.html에서 가져옴 */
        #google_map-detail {
            height: 30px;
            padding: 0 20px;
            background-color: #217566;
            color: #fff;
            border: none;
            border-radius: 5px;
            margin-top: 5px;
            margin-left: 10px;        
        }

		/*  2022-04-28 | 구글맵 마커의 상세정보 클릭시 닫기버튼이 핑크색으로 나온다.  
			kiban_home.html에서만 나타나는 현상으로 sample.html에는 문제가 없음. 개별 css적용이라 문제가 생긴것으로 보임
			배경색을 바꿔도 경계선에 핑크색이 유지되므로 border값을 0으로 설정 	*/
        #pink_to_green {
        	background-color: #217566;
        	border: 0;
        }
        
    </style>
</head>

<body class="layout-light top-menu overlayScroll">
<div class="mobile-search"></div>
<div class="mobile-author-actions"></div>
<!-- 공통 topbar -->
<th:block th:include="/../fragments/topbar.html"></th:block>
<main class="main-content" style="background-color: #FCFCFC;">
    <div class="contents" style="background-color: #FFFFFF;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body" style="height: 280px;">
                            <div id="doughnut" class="slick-slider slick-dots-bottom" data-dots-slick='true'>
                                <div class="slick-slider__single d-flex">
                                    <p class="color-primary fa-lg mb-3 mt-5 ml-3" style="color: black">총 품종 수</p>
                                    <div class="data_relative">
                                        <div class="doughnut_cover">
                                            <canvas id="doughnut1" style="height:210px; width:200px"></canvas>
                                        </div>
                                        <div class="data_number">
                                            <span class="data breed_count"></span>
                                        </div>
                                    </div>
                                    <div class="data_percent" id="doughnut1_data">
                                        <!--
                                        <ul>
                                            <li>20.81%</li>
                                            <li>8.09%</li>
                                            <li>4.62%</li>
                                            <li>8.09%</li>
                                            <li>8.09%</li>
                                            <li>2%</li>
                                            <li>5.02%</li>
                                            <li>8.61%</li>
                                            <li>20.81%</li>
                                            <li>14.45%</li>
                                        </ul>
                                        -->
                                    </div>
                                    <p class="color-primary fa-lg mb-3 mt-5 ml-3" style="color: black">생산 판매 신고</p>
                                    <div class="data_relative">
                                        <div class="doughnut_cover">
                                            <canvas id="doughnut2" style="height:210px; width:200px"></canvas>
                                        </div>
                                        <div class="data_number">
                                            <!-- <span class="data">174건</span> -->
                                        </div>
                                    </div>
                                    <div class="data_percent" id="doughnut2_data">
                                        <!--
                                        <ul>
                                            <li>20.81%</li>
                                            <li>8.09%</li>
                                            <li>4.62%</li>
                                            <li>8.09%</li>
                                            <li>8.09%</li>
                                            <li>2%</li>
                                            <li>5.02%</li>
                                            <li>8.61%</li>
                                            <li>20.81%</li>
                                            <li>14.45%</li>
                                        </ul>
                                        -->
                                    </div>
                                </div>
                                <div class="slick-slider__single d-flex">
                                    <p class="color-primary fa-lg mb-3 mt-5 ml-3" style="color: black">품종 보호 출원</p>
                                    <div class="data_relative">
                                        <div class="doughnut_cover">
                                            <canvas id="doughnut3" style="height:210px; width:200px"></canvas>
                                        </div>
                                        <div class="data_number">
                                            <!-- <span class="data">174건</span> -->
                                        </div>
                                    </div>
                                    <div class="data_percent" id="doughnut2_data">
                                        <!--
                                        <ul>
                                            <li>20.81%</li>
                                            <li>8.09%</li>
                                            <li>4.62%</li>
                                            <li>8.09%</li>
                                            <li>8.09%</li>
                                            <li>2%</li>
                                            <li>5.02%</li>
                                            <li>8.61%</li>
                                            <li>20.81%</li>
                                            <li>14.45%</li>
                                        </ul>
                                        -->
                                    </div>
                                    <p class="color-primary fa-lg mb-3 mt-5 ml-3" style="color: black">품종 보호 등록</p>
                                    <div class="data_relative">
                                        <div class="doughnut_cover">
                                            <canvas id="doughnut4" style="height:210px; width:200px"></canvas>
                                        </div>
                                        <div class="data_number">
                                            <!-- <span class="data">174건</span> -->
                                        </div>
                                    </div>
                                    <div class="data_percent" id="doughnut2_data">
                                        <!--
                                        <ul>
                                            <li>20.81%</li>
                                            <li>8.09%</li>
                                            <li>4.62%</li>
                                            <li>8.09%</li>
                                            <li>8.09%</li>
                                            <li>2%</li>
                                            <li>5.02%</li>
                                            <li>8.61%</li>
                                            <li>20.81%</li>
                                            <li>14.45%</li>
                                        </ul>
                                        -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <p class="color-primary fa-lg mb-3 mt-5 ml-3">작물별 품종 수</p>
                        <div class="card-body">
                            <div>
                                <canvas id="bar1" height="25px"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <p class="color-primary fa-lg mb-3 mt-5 ml-3" id="test_click">시교 진행 현황</p>
                        <div class="card-body">
                            <ul class="map" id="google_container">
                                <li id="google_map1"><!--<img src="../assets/vendor_assets/img/map1.png" alt="지도1">--></li>
                                <li id="google_map2"><!--<img src="../assets/vendor_assets/img/map2.png" alt="지도2">--></li>
                                <!-- 구글지도의 왼쪽 쏠림현상이 있어서 이 영역을 주석처리함 <li id="mysql_DB_load_test">  </li> -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>

<!-- 공통 하단 -->
<th:block th:include="/../fragments/footer.html"></th:block>
<!-- 공통 js -->
<th:block th:include="/../fragments/commonjs.html"></th:block>


    <!-- modal code -->
    <!-- 첨부파일 리스트  2021-11-04 -->
    <div class="modal-basic modal fade show pop7" id="sample_file" tabindex="-1" role="dialog" aria-hidden="true">
        <!-- 
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content modal-bg-white ">
                <div class="modal-header" style="border: none">
                    <h6 class="modal-title">시교자원관리</h6>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="atbd-upload">
                            <table>
                                <thead>
                                <tr>
                                    <th>작목명</th>
                                    <th>시교명</th>
                                    <th>종자번호(ID)</th>
                                </tr>
                                </thead>
                                <tbody id="file_list">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="border: none">
                    <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
        sample.html에서 가져옴. '상세정보'클릭시 주석 안의 태그가 담겨서 modal에 출력되어야 한다.-->
    </div>


<script type="text/javascript">
    $(document).ready(function () {
        SearchMarker();
        SelectChartBar();
        SelectChart();
    });

    function SearchMarker() {
        
		let crop_type = 'checked';		// 2022-06-13 | 이유는 모르겠지만 crop_type(유저권한?)이 'checked'여야 쿼리문이 정상작동
		
        $.ajax(
                {
                    url: 'selectOutcomeList',										// sample.html에서 불러도 url은 homeController.java에 있으니까 백엔드쪽은 건드릴필요 없나?
                    method: 'POST',
                    dataType: 'json',
                    data: { "user_crop" : crop_type },
                    success: function (result) {
                        var inKorea = [];
                        var outKorea = [];

                        console.log(result);
                        
                        for (let i = 0; i < result.sampleOutcomeKo.length; i++) {
    	                    inKorea.push(result.sampleOutcomeKo[i]);
                        }
                        
                        for (let i = 0; i < result.sampleOutcomeGlo.length; i++) {
                            outKorea.push(result.sampleOutcomeGlo[i]);
                        }

                        console.log("home inKo : ", inKorea );
                        console.log("home outKo : ", outKorea );
                        
                        searchArea(inKorea, outKorea);
                    },
                });
		
		/*
    	$.ajax(
            {
                url: 'selectOutcomeListAll',										
                method: 'POST',
                dataType: 'json',
                //data: data,
                success: function (result) {
                	console.log("result", result);
                    var inKorea = [];
                    var outKorea = [];
                    for (let i = 0; i < result.sampleOutcomeKo.length; i++) {
                        inKorea.push(result.sampleOutcomeKo[i]);
                    }

                    for (let i = 0; i < result.sampleOutcomeGlo.length; i++) {
                        outKorea.push(result.sampleOutcomeGlo[i]);
                    }

                    searchArea(inKorea, outKorea);
                }
            });
		*/																
    }

    /* 지도 검색 */
    $("#-search").change(function () {
        searchArea();
    });

    function searchArea(inKo, outKo) {
        var koreaOptions = {
            zoom: 6.4,
            center: {
                lat: 36.613766432253634,
                lng: 127.84942123102657
            },
            panControl: false,
            zoomControl: false,
            scaleControl: false,
            mapTypeControl: false,
            streetViewControl: false,
            fullscreenControl: false,
            scrollwheel: true,
            // mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var globalOptions = {
            ...koreaOptions,
            zoom: 1.4,
            center: {
                lat: 26.613766432253634,
                lng: 167.84942123102657
            },

        };

        var korMap = new google.maps.Map(document.querySelector("#google_map1"), koreaOptions);
        var globalMap = new google.maps.Map(document.querySelector("#google_map2"), globalOptions);

        var koreaLocations = [];
        var globalLocations = [];

        var koreaSubLocations = [];			// location을 받는 데이터배열에 지역명 추가, subLocation배열을 따로 만들어 이쪽으로 배정
        var globalSubLocations = [];		
        
        var marker1 = [];
        var marker2 = [];
        var infoWindow = new google.maps.InfoWindow();
        
        

        for (let i = 0; i < inKo.length; i++) {
        	koreaLocations.push({"lat":inKo[i].lat , "lng":inKo[i].lng , "location_name":inKo[i].name});
            koreaSubLocations.push({"location_name":inKo[i].name});
            //console.log("koreaLocations", koreaLocations);
        }


        for (let o = 0; o < outKo.length; o++) {
        	globalLocations.push({"lat":outKo[o].lat , "lng":outKo[o].lng , "location_name":outKo[o].name });
        	globalSubLocations.push({"location_name":outKo[o].name});
        }
		
        console.log("koreaLocations(sample) : ", koreaLocations);
        
        for (let i = 0; i < koreaLocations.length; i++) {

        		
                marker1[i] = new google.maps.Marker({ // 마커 생성
                map: korMap,
                position: koreaLocations[i],
        	    });									
        	
        	    marker1[i].addListener("click", () => {				// infoWindow 생성
        	    	infoWindow.close();
        	    	infoWindow.setContent('<p>지역: ' + koreaSubLocations[i].location_name + '</p>' +
        	    							//myFunction()에 지역명을 매개변수로 넘긴다
        	    						 '<button id="google_map-detail" onclick="myFunction(' + "'" + koreaLocations[i].location_name + "'" + ')">상세정보</button>');		
        	    	infoWindow.open(marker1[i].getMap(), marker1[i]);
        	    });
        }



        for (let i = 0; i < globalLocations.length; i++) {

        	
                marker2[i] = new google.maps.Marker({ // 마커 생성
                map: globalMap,
                position: globalLocations[i]
            	});
            	
                marker2[i].addListener("click", () => {
                	infoWindow.close();
                	infoWindow.setContent('<p>지역: ' + globalSubLocations[i].location_name + '</p>' +
                						  '<button id="google_map-detail" onclick="myFunction(' + "'" + globalLocations[i].location_name + "'" + ')">상세정보</button>');
                	infoWindow.open(marker2[i].getMap(), marker2[i]);
                });
                
        }
    }

    function KoreaList(num) {
    	location_arr = [
    			'서울',
    			'강원도',
    			'부산',
    			'강릉',
    			'남해',
    			'밀양',
    			'성주',
    			'익산'
    	];
    	
    	for(let i=0; i<location_arr.length ; i++) {
    		if(num == i) {
    			myFunction(location_arr[i]);
    			break;
    		}
    	}
    }
    
    function GlobalList(num) {
    	location_arr = [
			'멕시코',
			'베트남',
			'미국',
			'일본',
			'인도',
			'파키스탄'
	];
	
		for(let i=0; i<location_arr.length ; i++) {
			if(num == i) {
				myFunction(location_arr[i]);
				break;
			}
		}
    }


    function myFunction(num) {			// DB접근 및  modal창 생성
	
		let sample_outcome_place = num;		// name을 받아서 modal창에 서울이 떠야함
			
    	let data4 = {"sample_outcome_place": sample_outcome_place};

    	
    	$.ajax(
    		{
    			url: 'searchSeed2',		
    			method: 'POST',
    			dataType: 'json',
    			data: data4,
    			success: function(result2) {
    				
    				// console.log(result2);												// 내부에 result2를 parameter로 받은것 확인
    				
    				let name_code_num_arr = [];
    				
    				for (let i = 0; i < result2.sampleOutcome.length; i++) {			// 각 배열의 원소에 map을 집어넣음. 이 데이터에서 중복제거를 시도
    					
    					const map1 = {};
    					
    					map1['name'] = result2.sampleOutcome[i].sample_name;
        				map1['code'] = result2.sampleOutcome[i].sample_outcome_code;
        				map1['num'] = result2.sampleOutcome[i].sample_outcome_num;
    				
    					
    					
    					name_code_num_arr.push(map1);									// 중복제거된 map의 집합을 다시 배열화								
    				}

    				
    				const map2 = new Map();

					for(const character of name_code_num_arr) {							// 중요. 그냥 비교하면 참조주소를 비교하기 때문에 같다고 나올수가 없다.(중복제거 불가능)
						map2.set(JSON.stringify(character), character);					// 따라서 아예 문자열화하여 String의 값을 비교 & 중복제거함
					}

					const unique_arr = [...map2.values()];
    				
    				
    				// modal 영역에 필요한 태그 생성 영역
    				let sample_outcome_modal_htmlString = '';
    				sample_outcome_modal_htmlString += 	'<div class="modal-dialog modal-md" role="document">';
    				sample_outcome_modal_htmlString += 		'<div class="modal-content modal-bg-white ">';
    				sample_outcome_modal_htmlString += 			'<div class="modal-header" style="border: none">';
    				sample_outcome_modal_htmlString += 				'<h6 class="modal-title">시교자원관리 (' + sample_outcome_place + ')</h6>';
    				sample_outcome_modal_htmlString += 			'</div>';
    				sample_outcome_modal_htmlString += 			'<div class="modal-body">';
    				sample_outcome_modal_htmlString += 				'<div>';
    				sample_outcome_modal_htmlString += 					'<div class="atbd-upload">';
    				sample_outcome_modal_htmlString += 						'<table class="modal-outcome">';
    				sample_outcome_modal_htmlString += 							'<thead>';
    				sample_outcome_modal_htmlString += 								'<tr>'
    				sample_outcome_modal_htmlString += 									'<th>작목명</th><th>시교명</th><th>종자번호(ID)</th>';
    				sample_outcome_modal_htmlString += 								'</tr>';
    				sample_outcome_modal_htmlString += 							'</thead>'
    				sample_outcome_modal_htmlString += 							'<tbody id="file_list">';
    				
    				
    				// td에 리스트 받기
    				for(let i=0 ; i<unique_arr.length ; i++) { // length는 3일 것
        				sample_outcome_modal_htmlString += 								'<tr>'
                		sample_outcome_modal_htmlString += 									'<td>' + unique_arr[i].name + '</td><td>' + unique_arr[i].code + '</td><td>' + unique_arr[i].num +'</td>';
                		sample_outcome_modal_htmlString += 								'</tr>';
    				}    				

    				sample_outcome_modal_htmlString += 							'</tbody>';
    				sample_outcome_modal_htmlString += 						'</table>';
    				sample_outcome_modal_htmlString += 					'</div>';
    				sample_outcome_modal_htmlString += 				'</div>';
    				sample_outcome_modal_htmlString += 			'</div>';
    				sample_outcome_modal_htmlString += 			'<div class="modal-footer" style="border: none">';
    				sample_outcome_modal_htmlString += 				'<button type="button" id="pink_to_green" class="btn btn-secondary btn-sm" data-dismiss="modal">닫기</button>';
    				sample_outcome_modal_htmlString += 			'</div>';
    				sample_outcome_modal_htmlString += 		'</div>';
    				sample_outcome_modal_htmlString += 	'</div>';
    				
    				
    				$("#sample_file").html(sample_outcome_modal_htmlString);	
    				
    				$("#sample_file").modal("show");
    			} 
    		})
    }
    

    
    function smoothZoom(map, max, cnt) {
        if (cnt >= max) {
            return;
        } else {
            z = google.maps.event.addListener(map, 'zoom_changed', function (event) {
                google.maps.event.removeListener(z);

                smoothZoom(map, max, cnt + 1);
            });
            setTimeout(function () {
                map.setZoom(cnt)
            }, 40);
        }
    }

    function SelectChart() {
        $.ajax(
            {
                url: 'selectChart',
                method: 'POST',
                dataType: 'json',
                data: data,
                success: function (result) {
                    var chartData1 = [result.breed.crop_count_1, result.breed.crop_count_2, result.breed.crop_count_3, result.breed.crop_count_4, result.breed.crop_count_5, result.breed.crop_count_6, result.breed.crop_count_7, result.breed.crop_count_8, result.breed.crop_count_9, result.breed.crop_count_10];
                    var chartData2 = [result.sales.crop_count_1, result.sales.crop_count_2, result.sales.crop_count_3, result.sales.crop_count_4, result.sales.crop_count_5, result.sales.crop_count_6, result.sales.crop_count_7, result.sales.crop_count_8, result.sales.crop_count_9, result.sales.crop_count_10];
                    var chartData3 = [result.apply.crop_count_1, result.apply.crop_count_2, result.apply.crop_count_3, result.apply.crop_count_4, result.apply.crop_count_5, result.apply.crop_count_6, result.apply.crop_count_7, result.apply.crop_count_8, result.apply.crop_count_9, result.apply.crop_count_10];
                    var chartData4 = [result.protect.crop_count_1, result.protect.crop_count_2, result.protect.crop_count_3, result.protect.crop_count_4, result.protect.crop_count_5, result.protect.crop_count_6, result.protect.crop_count_7, result.protect.crop_count_8, result.protect.crop_count_9, result.protect.crop_count_10];

                    for (var i = 1; i < 11; i++) {
                    }
                    var ctx = $("#doughnut1").get(0).getContext('2d');

                    let doughnut1 = new Chart(ctx,
                        {
                            type: 'doughnut',
                            data:
                                {
                                    labels: ["고추", "대파", "멜론", "무", "배추", "수박", "양배추", "양파", "참외", "토마토"],
                                    datasets: [
                                        {
                                            label: "#",
                                            data: chartData1,
                                            backgroundColor:
                                                [
                                                    'rgb(255, 155, 147)',
                                                    'rgb(255, 207, 141)',
                                                    'rgb(247, 235, 137)',
                                                    'rgb(188, 227, 220)',
                                                    'rgb(184, 229, 252)',
                                                    'rgb(120, 210, 236)',
                                                    'rgb(178, 162, 207)',
                                                    'rgb(248, 184, 198)',
                                                    'rgb(243, 216, 197)',
                                                    'rgb(206, 187, 173)'
                                                ],
                                        }]
                                },
                            options:
                                {
                                    responsive: false,
                                    legend:
                                        {
                                            position: "right",
                                            labels: {
                                                fontColor: "black",
                                                usePointStyle: true,
                                                fontSize: 10,
                                                font: {
                                                    lineHeight: 1,
                                                },
                                            }
                                        },
                                    cutoutPercentage: 80,
                                }
                        });

                    var ctx = document.getElementById("doughnut2");
                    var doughnut2 = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ["고추", "대파", "멜론", "무", "배추", "수박", "양배추", "양파", "참외", "토마토"],
                            datasets: [{
                                label: '#',
                                data: chartData2,
                                backgroundColor: [
                                    'rgb(255, 155, 147)',
                                    'rgb(255, 207, 141)',
                                    'rgb(247, 235, 137)',
                                    'rgb(188, 227, 220)',
                                    'rgb(184, 229, 252)',
                                    'rgb(120, 210, 236)',
                                    'rgb(178, 162, 207)',
                                    'rgb(248, 184, 198)',
                                    'rgb(243, 216, 197)',
                                    'rgb(206, 187, 173)'
                                ]
                            }]
                        },
                        options: {
                            responsive: false,
                            legend: {
                                position: 'right',
                                labels: {
                                    fontColor: "black",
                                    usePointStyle: true,
                                    fontSize: 10,
                                    font: {
                                        lineHeight: 1,
                                    },
                                }
                            },
                            cutoutPercentage: 80,
                        }
                    });

                    var ctx = document.getElementById("doughnut3");
                    var doughnut3 = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ["고추", "대파", "멜론", "무", "배추", "수박", "양배추", "양파", "참외", "토마토"],
                            datasets: [{
                                label: "#",
                                data: chartData3,
                                backgroundColor: [
                                    'rgb(255, 155, 147)',
                                    'rgb(255, 207, 141)',
                                    'rgb(247, 235, 137)',
                                    'rgb(188, 227, 220)',
                                    'rgb(184, 229, 252)',
                                    'rgb(120, 210, 236)',
                                    'rgb(178, 162, 207)',
                                    'rgb(248, 184, 198)',
                                    'rgb(243, 216, 197)',
                                    'rgb(206, 187, 173)'
                                ]
                            }]
                        },
                        options: {
                            responsive: false,
                            legend: {
                                position: 'right',
                                labels: {
                                    fontColor: "black",
                                    usePointStyle: true,
                                    fontSize: 10,
                                    font: {
                                        lineHeight: 1,
                                    },
                                }
                            },
                            cutoutPercentage: 80,
                        }
                    });

                    var ctx = document.getElementById("doughnut4");
                    var doughnut4 = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ["고추", "대파", "멜론", "무", "배추", "수박", "양배추", "양파", "참외", "토마토"],
                            datasets: [{
                                label: '#',
                                data: chartData4,
                                backgroundColor: [
                                    'rgb(255, 155, 147)',
                                    'rgb(255, 207, 141)',
                                    'rgb(247, 235, 137)',
                                    'rgb(188, 227, 220)',
                                    'rgb(184, 229, 252)',
                                    'rgb(120, 210, 236)',
                                    'rgb(178, 162, 207)',
                                    'rgb(248, 184, 198)',
                                    'rgb(243, 216, 197)',
                                    'rgb(206, 187, 173)'
                                ]
                            }]
                        },
                        options: {
                            responsive: false,
                            legend: {
                                position: 'right',
                                labels: {
                                    fontColor: "black",
                                    usePointStyle: true,
                                    fontSize: 10,
                                    font: {
                                        lineHeight: 1,
                                    },
                                }
                            },
                            cutoutPercentage: 80,
                        }
                    });
                }
            });
    }

    function SelectChartBar() {
        $.ajax(
            {
                url: 'selectChartBar',
                method: 'POST',
                dataType: 'json',
                data: data,
                success: function (result) {
                    var date = new Date();
                    var year = date.getYear() + 1896
                    var year_list = [];
                    var crop_1 = [];
                    var crop_2 = [];
                    var crop_3 = [];
                    var crop_4 = [];
                    var crop_5 = [];
                    var crop_6 = [];
                    var crop_7 = [];
                    var crop_8 = [];
                    var crop_9 = [];
                    var crop_10 = [];

                    for (var i = 0; i < 5; i++) {
                        year_list.push(year + i);

                        var c1 = 0;
                        var c2 = 0;
                        var c3 = 0;
                        var c4 = 0;
                        var c5 = 0;
                        var c6 = 0;
                        var c7 = 0;
                        var c8 = 0;
                        var c9 = 0;
                        var c10 = 0;

                        for (var j = 0; j < result[year + i].length; j++) {
                            if (result[year + i][j].breed_name == "고추") {
                                c1 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "대파") {
                                c2 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "멜론") {
                                c3 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "무") {
                                c4 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "배추") {
                                c5 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "수박") {
                                c6 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "양배추") {
                                c7 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "양파") {
                                c8 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "참외") {
                                c9 = result[year + i][j].breed_count;
                            } else if (result[year + i][j].breed_name == "토마토") {
                                c10 = result[year + i][j].breed_count;
                            }
                        }

                        crop_1.push(c1);
                        crop_2.push(c2);
                        crop_3.push(c3);
                        crop_4.push(c4);
                        crop_5.push(c5);
                        crop_6.push(c6);
                        crop_7.push(c7);
                        crop_8.push(c8);
                        crop_9.push(c9);
                        crop_10.push(c10);
                    }

                    var ctx = document.getElementById("bar1");
                    var bar1 = new Chart(ctx,
                        {
                            type: 'bar',
                            data:
                                {
                                    // labels: ["2017", "2018", "2019", "2020", "2021"],
                                    labels: year_list,
                                    datasets: [
                                        {
                                            label: '고추',
                                            data: crop_1,
                                            backgroundColor: 'rgb(255, 155, 147)'
                                        },
                                        {
                                            label: '대파',
                                            data: crop_2,
                                            backgroundColor: 'rgb(255, 207, 141)'

                                        },
                                        {
                                            label: '멜론',
                                            data: crop_3,
                                            backgroundColor: 'rgb(247, 235, 137)'

                                        },
                                        {
                                            label: '무',
                                            data: crop_4,
                                            backgroundColor: 'rgb(188, 227, 220)'

                                        },
                                        {
                                            label: '배추',
                                            data: crop_5,
                                            backgroundColor: 'rgb(184, 229, 252)'

                                        },
                                        {
                                            label: '수박',
                                            data: crop_6,
                                            backgroundColor: 'rgb(120, 210, 236)'

                                        },
                                        {
                                            label: '양배추',
                                            data: crop_7,
                                            backgroundColor: 'rgb(178, 162, 207)'
                                        },
                                        {
                                            label: '양파',
                                            data: crop_8,
                                            backgroundColor: 'rgb(248, 184, 198)'
                                        },
                                        {
                                            label: '참외',
                                            data: crop_9,
                                            backgroundColor: 'rgb(243, 216, 197)'
                                        },
                                        {
                                            label: '토마토',
                                            data: crop_10,
                                            backgroundColor: 'rgb(206, 187, 173)'
                                        }
                                    ]
                                },
                            options: {
                                scales: {
                                    xAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }],
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true,
                                            stepSize: 100,
                                        }
                                    }]
                                },
                                legend: {
                                    position: 'top',
                                    labels: {
                                        usePointStyle: true,
                                    }
                                }
                            }
                        });
                }
            });
    }
</script>

</body>

</html>