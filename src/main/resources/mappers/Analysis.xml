<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thekiban.Mapper.AnalysisMapper">
	<!-- 품종 조회 -->
	<select id="SelectBreed" resultType="Breed">
		SELECT * FROM breed b
		LEFT JOIN detail d ON b.breed_name = d.detail_name
		LEFT JOIN standard s ON d.detail_id = s.detail_id
		WHERE d.detail_title = '시교명 (ID)' AND s.breed_id = b.breed_id AND s.standard IS NOT NULL
		<choose>
			<when test="type != '0' and total_id != null">
				<foreach collection="total_id" item="item" open="AND (" close=")" separator="OR">
					b.breed_id = #{item}
				</foreach>
			</when>
		</choose>
	</select>
	
	<!-- 원종 조회 -->
	<select id="SelectBasic" resultType="Basic">
		SELECT * FROM basic b
		LEFT JOIN detail d ON b.basic_name = d.detail_name
		LEFT JOIN standard s ON d.detail_id = s.detail_id
		WHERE d.detail_title = '계통명 (ID)' AND s.basic_id = b.basic_id AND s.standard IS NOT NULL
		<choose>
			<when test="type != '0' and total_id != null">
				<foreach collection="total_id" item="item" open="AND (" close=")" separator="OR">
					b.basic_id = #{item}
				</foreach>
			</when>
		</choose>
	</select>
	
	<!--  -->
	<select id="SelectTrait" parameterType="String" resultType="Detail">
		SELECT * FROM detail
		WHERE detail_name = #{deatil_name} AND detail_title != '작물'
	</select>
</mapper>